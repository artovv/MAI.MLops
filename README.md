# üß™ MLflow + Docker: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ RandomForest

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MLflow –≤–Ω—É—Ç—Ä–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –º–µ—Ç—Ä–∏–∫ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –º–æ–¥–µ–ª–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ docker-compose.yml                  # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ mlflow_storage/                     # –õ–æ–∫–∞–ª—å–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ë–î –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ MLflow
‚îÇ   ‚îú‚îÄ‚îÄ mlflow.db                       # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MLflow
‚îÇ   ‚îî‚îÄ‚îÄ artifacts/                      # –ö–∞—Ç–∞–ª–æ–≥ —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
‚îú‚îÄ‚îÄ trainer/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                      # Dockerfile –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞ –æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ train.py                        # –°–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏
‚îî‚îÄ‚îÄ README.md
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë:

```bash
docker compose up --build
```

### 2. –û—Ç–∫—Ä—ã—Ç—å MLflow UI:

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É:  
üëâ **http://localhost:5000**

–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å:

- –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏ (`n_estimators`, `max_depth`);
- –º–µ—Ç—Ä–∏–∫—É (`mse`);
- –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –º–æ–¥–µ–ª—å);
- –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—É—Å–∫–æ–≤ (runs).

---

## ‚öôÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### MLflow-—Å–µ—Ä–≤–µ—Ä (`mlflow`)

- –ü–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –≤ `mlflow_storage/mlflow.db` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `mlflow_storage/artifacts/`
- –û—Ç–∫—Ä—ã—Ç –Ω–∞ –ø–æ—Ä—Ç—É `5000`

### –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (`trainer`)

- –û–±—É—á–∞–µ—Ç `RandomForestRegressor` –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç–µ –ö–∞–ª–∏—Ñ–æ—Ä–Ω–∏–∏
- –õ–æ–≥–∏—Ä—É–µ—Ç:
  - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏;
  - –∑–Ω–∞—á–µ–Ω–∏–µ MSE;
  - —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å (–≤ `artifacts`)

---

## üìÇ –ì–¥–µ –∏—Å–∫–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã?

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ `train.py`, –º–æ–¥–µ–ª–∏ –∏ –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ—è–≤—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ:

```
mlflow_storage/artifacts/<run_id>/model/
```

–¢–∞–∫–∂–µ –æ–Ω–∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ MLflow UI.

---

## üßπ –û—á–∏—Å—Ç–∫–∞

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker compose down
```

–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ:

```bash
rm -rf mlflow_storage/
```

---

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- [MLflow](https://mlflow.org/)
- Docker / Docker Compose
- Python 3.10
- scikit-learn

---

## üì¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

–ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–π—Ç–µ issue –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ PR!
